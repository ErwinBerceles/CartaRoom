<template>
<div class="currentBookings">
    <h1>You are a Host</h1>
    <h2>List of Current Bookings</h2>
    <ul v-for="booking of bookings" v-bind:key="booking['.key']">
        Customer: {{booking.userEmail}}<br />
            Date: {{booking.date}} <br />
            Time: {{booking.startTime}}:00 - {{booking.endTime}}:00<br />
        </ul>
</div>
</template>

<script>
import firebase from 'firebase';
import db from '@/firebase.js';

var userID;
firebase.auth().onAuthStateChanged(function (user) {
    if (user) {
        // console.log(user.uid); //a@a.com = gbEw7s5ic1drxG3vgFWD3DAMb972
        userID = user.uid;
    } else {
        // console.log("No user available");
        userID = "null";
    }
});

export default {
    name: 'currentBookings',
    data() {
        return {
            bookings: [],
        }
    },
    created() {
        db.ref('allBookings').orderByChild("room/hostID").equalTo(userID).once('value').then((snapshot) => {
            this.bookings = [];
            snapshot.forEach((doc) => {
                this.bookings.push(doc.val());
            })
        }).catch((error) => {
            console.log(error);
        });
    },
    methods: {}
}
</script>
